---
- name: Send email about test results
  hosts: localhost
  connection: local
  gather_facts: false
  
  vars:
    smtp_host: 'mail.yourcompany.com'    # Zmień na swój domyślny host SMTP
    smtp_port: 587                      # Zmień na swój domyślny port SMTP
    mail_from: 'noreply@yourcompany.com' # Zmień na swój domyślny adres nadawcy
    
  tasks:
    - name: Send email
      community.general.mail:
        host: "{{ smtp_host }}"
        port: "{{ smtp_port }}"
        from: "{{ mail_from }}"
        to: "{{ mail_to }}"
        subject: "CI/CD Build Results" # Możesz tu też zdefiniować stały temat maila
        body:
          html: |
            <html>
              <h3><div style="color: {{ status_color }}">{{ status }}</div></h3>
              <h4>Tests execution logs: {{ project_url }}</h4>
            </html>
        subtype: html
        attachments: "{{ attachments }}"
