// Ręczna konwersja do JSON w postaci stringa
function mapToJsonString(map: Map<any, any>): string {
    let obj: Record<string, any> = {};

    for (let [key, value] of map) {
        let formattedKey = typeof key === "string" ? `"${key}"` : `"${String(key)}"`;
        let formattedValue = value instanceof Map
            ? mapToJsonString(value) // Rekurencyjnie konwertuj zagnieżdżoną Map
            : typeof value === "string"
                ? `"${value}"` // Jeśli string, opakuj w cudzysłów
                : value; // Wartości liczbowe i inne pozostaw

        obj[formattedKey] = formattedValue;
    }

    // Konwersja do stringa i poprawna składnia JSON
    return `{${Object.entries(obj).map(([k, v]) => `${k}:${v}`).join(",")}}`;
}
