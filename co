/**
 * Ekstrahuje 'devHash' tokena o statusie zawieszonym ('TOKPER_SUSPEND_CUST') 
 * z pełnej odpowiedzi API /api/tokens/info.
 *
 * @param {object} responseBody - Obiekt body odpowiedzi z cy.lolekGetTokensInfo.
 * @returns {string | null} devHash tokena lub null.
 */
const extractSuspendedDevHash = (responseBody) => {
    // 1. Definicja stałej operacji do szukania (dobra praktyka)
    const SUSPENDED_OP = 'TOKPER_SUSPEND_CUST';

    // 2. BEZPIECZNE odczytanie tablicy tokenów z uwzględnieniem obiektu 'data'
    const devs = responseBody?.data
        ?.tokenActivationEnable
        ?.google
        ?.digitizeddevs ?? [];

    // 3. Wyszukanie tokena, który zawiera w 'availableOperations' status zawieszony.
    const suspendedToken = devs.find(dev => {
        // Zabezpieczenie: upewnienie się, że 'availableOperations' jest tablicą
        const operations = dev?.availableOperations ?? [];
        
        // Używamy Array.prototype.includes() dla czystości
        return operations.includes(SUSPENDED_OP);
    });

    // 4. Bezpieczny zwrot devHash znalezionego tokena.
    return suspendedToken?.devHash || null;
};
