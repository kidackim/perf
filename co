# Sugerowana zmiana tematu - od razu informuje o problemie
        subject: "Build {{ build }}: Wykryto błędy w testach automatycznych"

        body: |
          <!DOCTYPE html>
          <html lang="pl">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <style>
              body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f5f5f5; }
              .container { max-width: 800px; margin: 20px auto; background-color: #fff; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; }
              .header { background-color: #FF6200; color: #ffffff; padding: 20px; text-align: center; }
              .header h2 { margin: 0; }
              .content { padding: 30px; }
              .status-box { padding: 15px; border-radius: 5px; text-align: center; font-size: 20px; font-weight: bold; color: #fff; }
              .status-failure { background-color: #D4351C; } /* Czerwony ING */
              .status-warning { background-color: #FFB81C; } /* Żółty ING */
              .summary { margin-top: 20px; }
              .summary p { font-size: 16px; color: #333; }
              .details-toggle { cursor: pointer; font-weight: bold; font-size: 18px; color: #D4351C; text-decoration: none; display: block; padding: 10px; border: 1px solid #ddd; margin-top: 15px; border-radius: 5px; background-color: #f9f9f9; }
              .details-content { border: 1px solid #ddd; border-top: none; padding: 15px; display: none; }
              .details-content pre { white-space: pre-wrap; word-wrap: break-word; background-color: #fdfdfd; padding: 10px; border-radius: 4px; margin: 0; }
              .footer { background-color: #f2f2f2; color: #777; padding: 15px; text-align: center; font-size: 12px; }
            </style>
          </head>
          <body>
            <table class="container" cellpadding="0" cellspacing="0" border="0">
              <tr>
                <td class="header">
                  <h2>Raport z testów automatycznych</h2>
                </td>
              </tr>
              <tr>
                <td class="content">
                  <div class="status-box status-failure">
                    Failure
                  </div>
                  <div class="summary">
                    <p><strong>Projekt:</strong> Cypress MCE API Tests</p>
                    <p><strong>Build ID:</strong> {{ build }}</p>
                    <p><strong>Link do pełnych wyników:</strong> <a href="{{ project_url }}">Przejdź do Azure DevOps</a></p>
                  </div>

                  <details open>
                    <summary class="details-toggle">
                      ❌ Wykryte błędy ({{ failed_tests_list.split('\n') | length }}) - Kliknij, aby zwinąć/rozwinąć
                    </summary>
                    <div class="details-content">
                      <pre>{{ failed_tests_list }}</pre>
                    </div>
                  </details>

                </td>
              </tr>
              <tr>
                <td class="footer">
                  Wiadomość wygenerowana automatycznie przez Azure DevOps.
                </td>
              </tr>
            </table>
          </body>
          </html>
