function mapToJson(map: Map<any, any>): Record<string, any> {
    const obj: Record<string, any> = {};

    for (const [key, value] of Array.from(map)) {
        obj[String(key)] = value instanceof Map ? mapToJson(value) : value;
    }

    return obj;
}
