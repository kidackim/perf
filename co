 - name: Copy entire Target folder from container to remote host
      ansible.builtin.shell: |
        "{{ docker_cmd }}" cp "{{ run_container_detached_result.stdout }}":/app/target/ /app/target/all_target_contents/
      args:
        warn: false
      register: cp_full_target_result
      when: wait_container_result is defined and wait_container_result.rc == 0 # Upewnij się, że kontener zakończył pracę
      failed_when: cp_full_target_result.rc != 0

    - name: Fetch entire Target directory from remote host
      ansible.builtin.fetch:
        src: '/app/target/all_target_contents/' # <--- WAŻNE: Ścieżka do nowo skopiowanego folderu na HOŚCIE
        dest: './fetched_all_target_contents/' # <--- Nowa, dedykowana lokalizacja na AGENCIE AZURE DEVOPS
        flat: no # WAŻNE: 'no' zachowa pełną strukturę katalogów
      register: fetch_all_target_result
      ignore_errors: yes
      when: cp_full_target_result is defined and cp_full_target_result.rc == 0 # Upewnij się, że kopiowanie z dockera na hosta się powiodło
