function convertToPlainObject(value: any): any {
    if (value == null) return null;

    // Jeśli wartość to natywna mapa Scala (Scala Map), zamieniamy na obiekt JS
    if (value instanceof JavaObject && typeof value.entries === "function") {
        return Object.fromEntries(Array.from(value.entries()).map(([key, val]) => [String(key), convertToPlainObject(val)]));
    }

    // Jeśli wartość to zwykła mapa JS, przekształcamy w obiekt JS
    if (value instanceof Map) {
        return Object.fromEntries(Array.from(value.entries()).map(([key, val]) => [String(key), convertToPlainObject(val)]));
    }

    // W przeciwnym wypadku zwracamy wartość (np. string, liczba)
    return value;
}
