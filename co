 - script: |
        echo "Executing 'ls -l' on specified host using Ansible ad-hoc command..."
        # Adres IP/Nazwa hosta do zalogowania to bezpośrednio wartość parametru hostname
        # Nazwa użytkownika i hasło są tworzone dynamicznie na podstawie hostname, analogicznie jak na zdjęciu
        ansible all -i '${{ parameters.hostname }},' \
          -m ansible.builtin.shell \
          -a "ls -l" \
          -e "ansible_user=$({{ parameters.hostname }})-USER ansible_password=$({{ parameters.hostname }})-PASS"
          # UWAGA: Taki sposób podawania hasła w "extra-vars" w YAML NIE jest bezpieczny.
          # Dla prawdziwego środowiska, używaj zmiennych Secret w Azure DevOps
          # lub zadania InstallSSHKey@0.

      displayName: 'Perform ls -l on remote host via Ansible ad-hoc with dynamic creds'
      condition: succeeded()
